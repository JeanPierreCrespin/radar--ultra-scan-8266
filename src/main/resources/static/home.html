<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radar Sensor App - Minimalista</title>
    <!-- Referencia a Tailwind CSS y nuestra hoja de estilos personalizada -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="flex flex-col items-center justify-center min-h-screen p-4">

<!-- Cuadro de Mensaje Personalizado (Reemplaza a alert()) -->
<div id="message-box" class="hidden fixed top-4 right-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg shadow-xl z-50 transition-opacity duration-300" role="alert">
    <strong class="font-bold">Error de Simulación:</strong>
    <span id="message-content" class="block sm:inline ml-2"></span>
    <span class="absolute top-0 bottom-0 right-0 px-4 py-3 cursor-pointer" onclick="document.getElementById('message-box').classList.add('hidden')">
            <svg class="fill-current h-6 w-6 text-red-500" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><title>Cerrar</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.697l-2.651 3.152a1.2 1.2 0 1 1-1.697-1.697l3.152-2.651-3.152-2.651a1.2 1.2 0 0 1 1.697-1.697l2.651 3.152 2.651-3.152a1.2 1.2 0 0 1 1.697 1.697L11.697 10l3.152 2.651a1.2 1.2 0 0 1 0 1.698z"/></svg>
        </span>
</div>

<!-- Tarjeta Principal de la Aplicación -->
<div class="bg-white rounded-xl shadow-2xl p-8 w-full max-w-4xl transition duration-300 hover:shadow-xl">

    <h1 class="text-3xl font-extrabold text-gray-800 mb-2">Sensor Radar Detector</h1>
    <p class="text-gray-500 mb-6">Visualización de múltiples objetos detectados (0° - 180°).</p>

    <div class="flex flex-col md:flex-row items-start md:space-x-8">

        <!-- Columna del Radar -->
        <div class="flex-shrink-0 mb-8 md:mb-0">
            <div class="radar-container mx-auto">

                <!-- Contenedor interno para revertir la rotación de los elementos -->
                <div class="radar-inner-content">
                    <!-- Base circular para dibujar la cuadrícula de alcance (Range Lines) -->
                    <div class="radar-base"></div>

                    <!-- Líneas de Alcance (Grilla Estática). El estilo de width se aplica in-line para mantener la estructura de grilla. -->
                    <div class="range-line" style="width: 100px; height: 100px;"></div>
                    <div class="range-line" style="width: 200px; height: 200px;"></div>
                    <div class="range-line" style="width: 300px; height: 300px;"></div>
                    <div class="range-line" style="width: 400px; height: 400px;"></div>

                    <!-- Marcadores de Angulo. Las clases de posición (angle-0, angle-30, etc.) están en styles.css -->
                    <div class="angle-marker angle-0">0°</div>
                    <div class="angle-marker angle-30">30°</div>
                    <div class="angle-marker angle-60">60°</div>
                    <div class="angle-marker angle-90">90°</div>
                    <div class="angle-marker angle-120">120°</div>
                    <div class="angle-marker angle-150">150°</div>
                    <div class="angle-marker angle-180">180°</div>

                    <!-- La aguja o brazo del radar -->
                    <div id="radar-arm" class="scanning"></div>

                    <!-- Contenedor para múltiples puntos de objeto (los puntos se crean en radar.js) -->
                    <div id="object-points-container"></div>
                </div>

            </div>
        </div>

        <!-- Columna de Datos y Controles -->
        <div class="w-full">
            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2 border-gray-100">Información de la Detección (Más Cercano)</h2>

            <div class="space-y-4 mb-6 p-4 bg-gray-50 rounded-lg">
                <!-- Display de Ángulo -->
                <div class="flex justify-between items-center p-3 bg-purple-50 rounded-md">
                    <span class="text-sm font-medium text-gray-600">Ángulo Detectado (°)</span>
                    <span id="display-angle" class="text-2xl font-bold text-purple-700">--</span>
                </div>

                <!-- Display de Distancia -->
                <div class="flex justify-between items-center p-3 bg-red-50 rounded-md">
                    <span class="text-sm font-medium text-gray-600">Distancia (cm)</span>
                    <span id="display-distance" class="text-2xl font-bold text-red-700">--</span>
                </div>

                <!-- Estado del Sensor -->
                <div class="flex justify-between items-center p-3 bg-green-50 rounded-md">
                    <span class="text-sm font-medium text-gray-600">Estado</span>
                    <span id="display-status" class="text-sm font-bold text-green-700">Esperando datos...</span>
                </div>
            </div>

            <h2 class="text-xl font-semibold text-gray-700 mb-4 border-b pb-2 border-gray-100">Simulación de Escaneo (JSON)</h2>

            <!-- Control de Simulación (Para pruebas del frontend) -->
            <div class="p-4 border border-gray-100 rounded-lg bg-white shadow-sm">
                <p class="text-sm text-gray-500 mb-3">Introduce la lista de objetos en formato JSON:</p>
                <textarea id="input-json" placeholder='Ej: [{"angle": 30, "distance": 150}, {"angle": 120, "distance": 50}]' class="w-full h-24 p-2 border border-gray-300 rounded-lg focus:ring-purple-300 focus:border-purple-300 mb-4"></textarea>

                <button id="simulate-button" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition duration-200 shadow-md hover:shadow-lg">
                    Simular Escaneo Multi-Objeto
                </button>
                <button id="clear-button" class="w-full mt-2 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-lg transition duration-200">
                    Limpiar Detecciones
                </button>
            </div>
        </div>

    </div>
</div>

<!-- Referencia al script principal de lógica -->
<script src="radar.js"></script>
</body>
</html>